#include <Wire.h>
#include <BaroSensor.h>

float temp;
float pressure;

void setup()
{
  Serial.begin(9600);
  BaroSensor.begin();
}

void loop()
{
  float temp;
  float pressure;
  
  //Check if sensor is working properly
  if(!BaroSensor.getTempAndPressure(&temp, &pressure) {
    Serial.print("Sensor error: "); 
    Serial.println(BaroSensor.getError());
    BaroSensor.begin(); // Try to reinitialise the sensor if we can
  }
  
  else {
    Serial.print("Temperature: "); 
    
    //Error checking:
    //Temp range of sensor: -40 to +85 degrees celcius
    if(temp <-40 || temp >85){
      Serial.println("-555");
    }
    else { 
      Serial.println(temp);
    }

    Serial.print("Pressure: ");
    
    //Error checking:
    //Pressure range of sensor: 10 to 2000 mbar
    if(pressure <10 || pressure >2000){
      Serial.println("-555");
    }
    else {
      Serial.println(pressure);
    }
  }
  delay(1000);
}
